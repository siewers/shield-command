<Application xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:sty="using:FluentAvalonia.Styling"
             x:Class="ShieldCommander.UI.App"
             xmlns:local="using:ShieldCommander.UI"
             Name="Shield Commander">

    <Application.DataTemplates>
        <local:ViewLocator/>
    </Application.DataTemplates>

    <Application.Styles>
        <sty:FluentAvaloniaTheme PreferSystemTheme="True" />

        <!-- FluentAvaloniaUI's sort arrow icon is taller than the text, pushing it off-center -->
        <Style Selector="DataGridColumnHeader ContentPresenter">
            <Setter Property="VerticalAlignment" Value="Center"/>
        </Style>

        <Style Selector="DataGridCell:current">
            <Setter Property="Foreground" Value="{DynamicResource DataGridCellForeground}" />
        </Style>
    </Application.Styles>

    <Application.Resources>
        <!-- Hide the cell focus border. FluentAvaloniaUI draws two rectangles (white + dark)
             via Grid#FocusVisual inside DataGridCell. Style selectors and /template/ targeting
             don't work because FluentAvaloniaUI replaces the control theme at runtime.
             Overriding these brush resources is the only approach that works.
             Note: Focusable="False" on DataGrid also hides the border but breaks context menus. -->
        <SolidColorBrush x:Key="DataGridCellFocusVisualPrimaryBrush" Color="Transparent" />
        <SolidColorBrush x:Key="DataGridCellFocusVisualSecondaryBrush" Color="Transparent" />
    </Application.Resources>

    <NativeMenu.Menu>
        <NativeMenu>
            <NativeMenuItem Header="About Shield Commander" Click="AboutMenuItem_Click" />
            <NativeMenuItemSeparator />
        </NativeMenu>
    </NativeMenu.Menu>
</Application>